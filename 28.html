<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        ul{
            list-style: none;
            width: 165px;
            margin: 0;
            padding: 0;
        }

        ul li:hover{
            background-color: yellow;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <input id="email-input" type="text">
        <ul id="email-sug-wrapper" class="email-sug"></ul>
    </div>
    <script>
        var postfixList = ['163.com', 'gmail.com', '126.com', 'qq.com', '263.net'];
        var input=document.querySelector('input'),
            ul=document.querySelector('ul');

        function ul_creater1(inputval){
            var res=''
            postfixList.forEach(function(curvalue){
                    res+="<li style='text-align:left;border:1px solid gray' click=handleClick onmouseover=handleOnmouseover>"+ inputval+'@'+curvalue + "</li>"
            })
            return res
        }

        function ul_creater2(inputval){
            var arr=inputval.split('@'),
                front_cont=arr[0],
                res='';
            postfixList.forEach(function(curvalue){
                    res+="<li style='text-align:left;border:1px solid gray'>"+ front_cont+'@'+curvalue + "</li>"
            })
            return res
        }

        function ul_creater3(inputval){
            var res='',
                arr2=inputval.split('@'),
                front2=arr2[0],
                end2=arr2[1];
            postfixList.forEach(function(curvalue){
                    if(curvalue.indexOf(end2)===0){
                        res+="<li style='text-align:left;border:1px solid gray' >"+front2+'@'+curvalue + "</li>"
                    }
            })
            res=res || ul_creater2(inputval)
            return res
        }


        input.onkeyup=function(){
            var input_content=this.value.trim(),
                ul_inner='';
            ul.style.display=''
            if(input_content!==''){
               ul_inner=ul_creater3(input_content)
            }
            ul.innerHTML=ul_inner
        }

        ul.onclick=function(ev){
            var event=ev || window.event
            // console.log(event)
            var target=event.target||event.srcElement
            input.value=target.innerHTML
            ul.style.display='none'
        }
    </script>
</body>
</html>